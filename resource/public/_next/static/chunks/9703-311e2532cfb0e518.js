"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9703],{66161:function(e,r,t){t.d(r,{Z:function(){return o}});var n=t(35250),i=t(19841);function o(e){var r=e.percentage,t=e.thickness,o=e.className,a=e.backgroundStrokeClassName,s=e.transitionDuration,l=e.transitionTimingFunction,u=e.onTransitionEnd,d=120*(void 0===t?1/12:t),c=(120-d)/2,f=2*Math.PI*c;return(0,n.jsxs)("svg",{width:120,height:120,viewBox:"0 0 ".concat(120," ").concat(120),className:o,children:[(0,n.jsx)("circle",{className:(0,i.default)("origin-[50%_50%] -rotate-90",void 0===a?"stroke-gray-400":a),strokeWidth:d,fill:"transparent",r:c,cx:60,cy:60}),(0,n.jsx)("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:d,strokeDashoffset:f-r/100*f,strokeDasharray:"".concat(f," ").concat(f),fill:"transparent",r:c,cx:60,cy:60,style:{transitionDuration:s,transitionTimingFunction:l},onTransitionEnd:u})]})}},76768:function(e,r,t){var n=t(35250),i=t(5397),o=t.n(i);t(70079);var a=function(e){var r=e.children;return(0,n.jsx)(n.Fragment,{children:r})};r.Z=o()(function(){return Promise.resolve(a)},{ssr:!1})},68260:function(e,r,t){t.d(r,{$e:function(){return o},EZ:function(){return a},Ql:function(){return i},dO:function(){return n},xC:function(){return s}});var n=10,i=4,o={duration:20,hasCloseButton:!0},a=512,s=536870912},91202:function(e,r,t){var n,i,o,a;t.d(r,{A:function(){return n},X:function(){return i}}),(o=n||(n={}))[o.None=0]="None",o[o.Multimodal=1]="Multimodal",o[o.Interpreter=2]="Interpreter",o[o.Retrieval=3]="Retrieval",o[o.ContextConnector=4]="ContextConnector",o[o.ProfilePicture=5]="ProfilePicture",(a=i||(i={})).Uploading="uploading",a.Ready="ready"},19797:function(e,r,t){t.d(r,{W7:function(){return p},cT:function(){return g},lU:function(){return v},po:function(){return m}});var n=t(21722),i=t(38104),o=t(5053),a=t(20630),s=t(86646),l=t(93028),u=t(94968),d=t(72290),c=t(17130),f={duration:20,hasCloseButton:!0};function p(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function m(e){return new Promise(function(r,t){var n=new FileReader,i=new Image;n.onload=function(){i.onload=function(){return r(i)},i.onerror=function(e){return t(e)},i.src=n.result},n.readAsDataURL(e)})}function g(e,r,t,n,i,o){return h.apply(this,arguments)}function h(){return(h=(0,n._)(function(e,r,t,n,l,u){var p,m,g,h,v,w,x,b;return(0,i.Jh)(this,function(i){switch(i.label){case 0:p=u.usesRetrievalIndex?performance.now():void 0,i.label=1;case 1:return i.trys.push([1,7,,8]),[4,s.ZP.createFile(r.name,r.size,n)];case 2:return g=(m=i.sent()).file_id,h=m.upload_url,l.onFileCreated(e,g,h),v=n.kind===o.Ei.Gizmo?n.gizmoId:void 0,[4,function(e,r,t,n,i){return y.apply(this,arguments)}(e,r,g,h,l.onFileUploadProgress,null!==(w=u.usesRetrievalIndex)&&void 0!==w&&w,null!==(x=u.shouldUpdateProgress)&&void 0!==x&&x,{gizmoId:v})];case 3:if(i.sent(),!u.usesRetrievalIndex)return[3,5];return[4,function(e,r){return _.apply(this,arguments)}(g,v)];case 4:return(null==(b=i.sent())?void 0:b.status)===o.Xf.Skipped&&d.m.danger(t.formatMessage(k.retrievalSkippedFile,{fileName:b.name}),f),l.onFileUploaded(e,void 0,{fileTokenSize:b.file_size_tokens}),[3,6];case 5:l.onFileUploaded(e,u.imageDimensions),i.label=6;case 6:return null!=p&&s.ZP.postRetrievalTiming({e2eLatencyMs:performance.now()-p}),[3,8];case 7:var E,M;return E=i.sent(),M=(0,c.kr)(t,"default_upload_error",{fileName:r.name}),(0,a.T)(E)&&void 0!==E.code&&(M=(0,c.kr)(t,E.code)),d.m.danger(M,f),l.onError(e,"error"),[3,8];case 8:return[2]}})})).apply(this,arguments)}function v(e,r,t,n,i){return w.apply(this,arguments)}function w(){return(w=(0,n._)(function(e,r,t,n,o){var a;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,m(r)];case 1:return[2,g(e,r,t,{kind:n},o,{imageDimensions:{width:(a=i.sent()).width,height:a.height}})]}})})).apply(this,arguments)}function y(){return(y=(0,n._)(function(e,r,t,o,a){var l,u,d,c=arguments;return(0,i.Jh)(this,function(f){switch(f.label){case 0:var p;return l=c.length>5&&void 0!==c[5]&&c[5],u=c.length>6&&void 0!==c[6]&&c[6],d=c.length>7&&void 0!==c[7]?c[7]:{},[4,s.ZP.uploadFileToAzureStorage(r,o,function(r){u&&a(e,10+80*r)}).then((p=(0,n._)(function(r){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return a(e,90),201!==r.status&&function(e,r){x.apply(this,arguments)}(r,t,l),[4,s.ZP.processFileUpload(t,d)];case 1:return n.sent(),[2]}})}),function(e){return p.apply(this,arguments)}))];case 1:return[2,f.sent()]}})})).apply(this,arguments)}function _(){return(_=(0,n._)(function(e,r){var t,n,a,u;return(0,i.Jh)(this,function(i){switch(i.label){case 0:t=Date.now()+6e4,n=function(e){return new Promise(function(r){return setTimeout(r,e)})},a=0,i.label=1;case 1:if(!(Date.now()<t))return[3,4];return[4,s.ZP.getRetrievalStatus(e,r)];case 2:if((u=i.sent()).status===o.Xf.Success||u.status===o.Xf.Skipped)return[2,u];if(u.status===o.Xf.Failed)throw new l.gK("Context extraction failed",void 0,u.error_code);return[4,n(Math.min(1e3,100*++a))];case 3:return i.sent(),[3,1];case 4:throw new l.gK("Retrieval indexing timed out")}})})).apply(this,arguments)}function x(){return(x=(0,n._)(function(e,r){var t,n,o=arguments;return(0,i.Jh)(this,function(i){switch(i.label){case 0:t=o.length>2&&void 0!==o[2]&&o[2],n="Unknown error",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.data];case 2:return n=i.sent(),[3,4];case 3:return i.sent(),[3,4];case 4:throw t&&s.ZP.markFileUploadFailed(r,{error:n}),new l.gK("File upload to blobstore failed",void 0,"default_upload_error")}})})).apply(this,arguments)}var k=(0,u.vU)({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"',description:"Error message when user uploads a file that we are unable to parse and extract text from."}})},17130:function(e,r,t){t.d(r,{$H:function(){return h},$p:function(){return T},CO:function(){return P},Iy:function(){return m},KL:function(){return C},L8:function(){return g},O6:function(){return y},Tu:function(){return L},VF:function(){return w},WI:function(){return Z},YN:function(){return x},Z8:function(){return U},Zp:function(){return M},_0:function(){return E},kr:function(){return v},p0:function(){return F},ww:function(){return _},xs:function(){return b}});var n=t(21722),i=t(38104),o=t(5053),a=t(61098),s=t(86646),l=t(4536),u=t(70079),d=t(70671),c=t(94968),f=t(72290),p=t(91202);function m(e){return e.replace("file-service://","")}function g(e){return"file-service://"+e}function h(e){return e.startsWith("file-service://")}function v(e,r,t){switch(r){case"file_zero_bytes":return e.formatMessage(I.fileZeroBytes,t);case"file_too_large":return e.formatMessage(I.fileTooLarge,t);case"over_user_quota":return e.formatMessage(I.overUserQuota,t);case"file_not_found":case"file_expired":return e.formatMessage(I.fileNotFound,t);case"file_timed_out":return e.formatMessage(I.fileTimedOut,t);case"ace_pod_expired":return e.formatMessage(I.codeInterpreterSessionTimeout,t);case"permission_error":return e.formatMessage(I.permissionError,t);case"default_upload_error":case"file_rejected":return e.formatMessage(I.defaultCreateEntryError,t);case"default_download_link_error":return e.formatMessage(I.defaultDownloadLinkError,t);case"file_empty":return e.formatMessage(I.fileEmpty,t);case"too_many_tokens":return e.formatMessage(I.fileTooManyTokens,t);case"file_encrypted":return e.formatMessage(I.fileEncrypted,t);case"file_corrupted":return e.formatMessage(I.fileCorrupted,t);default:return e.formatMessage(I.unknownError)}}function w(){var e=(0,d.Z)();return(0,u.useCallback)(function(r,t){return v(e,r,t)},[e])}function y(){var e,r=(0,l.kP)().session,t=(0,d.Z)();return e=(0,n._)(function(e,n){var a,l,u,d,c,p,m,g;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(null==r)return f.m.danger(t.formatMessage(I.fileDownloadFailed)),[2,!1];i.label=1;case 1:return i.trys.push([1,6,,7]),[4,s.ZP.getFileDownloadLink(e)];case 2:if((u=i.sent()).status!==o.KF.Success)throw Error("File is not ready to download: "+JSON.stringify(u));if(!(null!=(d=null===(a=u.metadata)||void 0===a?void 0:null===(l=a.context_connector)||void 0===l?void 0:l.url)))return[3,3];return window.open(d,"_blank"),[3,5];case 3:return[4,fetch(u.download_url).then(function(e){return e.blob()})];case 4:c=i.sent(),p=URL.createObjectURL(c),(m=window.open(p,"_blank"))&&m.addEventListener("beforeunload",function(){URL.revokeObjectURL(p)}),(g=document.createElement("a")).href=p,g.download=n,g.style.display="none",g.click(),URL.revokeObjectURL(p),i.label=5;case 5:return[3,7];case 6:return i.sent(),f.m.danger(t.formatMessage(I.fileDownloadFailed)),[2,!1];case 7:return[2,!0]}})}),function(r,t){return e.apply(this,arguments)}}function _(e,r){if((null==r?void 0:r.kind)===a.OL.GizmoInteraction||(null==r?void 0:r.kind)===a.OL.GizmoTest){var t;return null===(t=r.gizmo)||void 0===t?void 0:t.product_features}return null==e?void 0:e.product_features}function x(e,r){var t,n,i,a,s=_(e,r);return(null==s?void 0:null===(t=s.attachments)||void 0===t?void 0:t.type)===o.Cd.CodeInterpreter?p.A.Interpreter:(null==s?void 0:null===(n=s.attachments)||void 0===n?void 0:n.type)===o.Cd.Multimodal?p.A.Multimodal:(null==s?void 0:null===(i=s.attachments)||void 0===i?void 0:i.type)===o.Cd.Retrieval?p.A.Retrieval:(null==s?void 0:null===(a=s.attachments)||void 0===a?void 0:a.type)===o.Cd.ContextConnector?p.A.ContextConnector:p.A.None}function k(e){var r,t=null===(r=e.split(".").pop())||void 0===r?void 0:r.toLowerCase();return({md:"text/markdown",java:"text/x-java",py:"text/x-script.python",c:"text/x-c",cpp:"text/x-c++",h:"text/x-c++",php:"text/x-php",rb:"text/x-ruby",tex:"application/x-latext",ts:"text/x-typescript",cs:"text/x-csharp"})[null!=t?t:""]||""}function b(e,r,t,n){if(null==n)return e;var i=k(r);i&&(t=i);var o=n.accepted_mime_types,a=n.can_accept_all_mime_types;return null!=o&&0!==o.length&&a?o.includes(t)?e:p.A.Interpreter:e}function E(e,r,t){var n,i,a,s=""!==r?r:k(t),l=null==e?void 0:null===(n=e.product_features)||void 0===n?void 0:n.attachments;return null==l?void 0:(null===(i=l.accepted_mime_types)||void 0===i?void 0:i.includes(s))?l.type:(null===(a=l.image_mime_types)||void 0===a?void 0:a.includes(s))?o.Cd.Multimodal:o.Cd.CodeInterpreter}function M(e,r){var t,n,i=_(e,r);return(null==i?void 0:null===(t=i.attachments)||void 0===t?void 0:t.can_accept_all_mime_types)?void 0:null==i?void 0:null===(n=i.attachments)||void 0===n?void 0:n.accepted_mime_types}function F(e,r){var t,n=_(e,r),i=(null!=n?n:{}).attachments;return(null==i?void 0:i.image_mime_types)?i.image_mime_types:(null==i?void 0:i.type)==="multimodal"?null!==(t=i.accepted_mime_types)&&void 0!==t?t:C:[]}var C=["image/png","image/jpeg","image/gif","image/webp"];function U(e){return(0,u.useMemo)(function(){if(void 0===e)return{};var r={"image/jpeg":[".jpg",".jpeg"],"image/svg+xml":[".svg"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]};return{accept:e.reduce(function(e,t){return t in r?e[t]=r[t]:t.includes("/")&&(e[t]=[".".concat(t.split("/")[1])]),e},{})}},[e])}function T(e){var r;return null===(r=e.split(".").pop())||void 0===r?void 0:r.toLowerCase()}function P(e){var r=T(e);return null!=r&&["jpg","jpeg","png","gif","webp"].includes(r)}function L(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fit";return new Promise(function(n,i){var o=new FileReader;o.onerror=function(e){console.error("File reading has failed:",e),i(Error("Failed to read the file."))},o.onload=function(o){var a=new Image;a.onerror=function(e){console.error("Image loading has failed:",e),i(Error("Failed to load the image."))},a.onload=function(){var o,s=document.createElement("canvas"),l=0,u=0;switch(t){case"fill":case"square":o=r/Math.min(a.width,a.height);break;default:o=r/Math.max(a.width,a.height)}var d=a.width*o,c=a.height*o;"square"===t?(s.width=r,s.height=r,l=(r-d)/2,u=(r-c)/2):(s.width=d,s.height=c);var f=s.getContext("2d");if(null==f){console.error("Canvas context creation failed. Your environment might not fully support HTML5 canvas."),i(Error("Failed to create canvas context."));return}f.drawImage(a,l,u,d,c);var p=e.type||"image/png";s.toBlob(function(r){r?n(new File([r],e.name,{type:p})):(console.error("Blob creation failed. Blob is null."),i(Error("Failed to create blob from image data.")))},p)},null==o.target?(console.error("Event target is null. Failed to load image."),i("Failed to load image.")):a.src=o.target.result},o.readAsDataURL(e)})}function Z(e,r){return L(e,r,"square")}var I=(0,c.vU)({defaultCreateEntryError:{id:"fileUpload.defaultCreateEntryError",defaultMessage:"Unable to upload {fileName}",description:"Error message when file upload fails"},defaultDownloadLinkError:{id:"fileUpload.defaultDownloadLinkError",defaultMessage:"Failed to get upload status for {fileName}",description:"Error message when file download link fails"},unknownError:{id:"fileUpload.unknownError",defaultMessage:"Unknown error occurred",description:"Error message when file upload fails"},fileZeroBytes:{id:"fileUpload.fileZeroBytes",defaultMessage:"File is empty",description:"Error message when file is zero bytes"},fileTooLarge:{id:"fileUpload.fileTooLarge",defaultMessage:"File is too large",description:"Error message when file is too large to upload"},overUserQuota:{id:"fileUpload.overUserQuota",defaultMessage:"User quota exceeded",description:"Error message when user storage space (quote) has been exceeded"},fileNotFound:{id:"fileUpload.fileNotFound",defaultMessage:"File not found",description:"Error message when file was not found"},fileTimedOut:{id:"fileUpload.fileTimedOut",defaultMessage:"File upload timed out. Please try again.",description:"Error message when file upload timed out"},fileEmpty:{id:"fileUpload.fileEmpty",defaultMessage:"No text could be extracted from this file.",description:"Error message when an uploaded file does not contain parsable text"},fileTooManyTokens:{id:"fileUpload.fileTooManyTokens",defaultMessage:"This file contains too much text content. Please try again with a smaller file.",description:"Error message when an uploaded file contains too many tokens/is too large."},fileEncrypted:{id:"fileUpload.fileEncrypted",defaultMessage:"This file is encrypted/requires a password to access. Please try again with an unencrypted file.",description:"Error message when an uploaded file that is encrypted."},fileCorrupted:{id:"fileUpload.fileCorrupted",defaultMessage:"This file is corrupted. Please ensure the file is not corrupted and try again.",description:"Error message when an uploaded file that is corrupted."},codeInterpreterSessionTimeout:{id:"fileUpload.codeInterpreterSessionTimeout",defaultMessage:"Code interpreter session expired",description:"Error message when code interpreter session expired"},permissionError:{id:"fileUpload.permissionError",defaultMessage:"Missing permission to access file",description:"Error message when user doesn't have permission to access a file"},fileDownloadFailed:{id:"filesModal.fileDownloadFailed",defaultMessage:"File download failed. Please try again.",description:"Error message when file download fails"}})},27382:function(e,r,t){t.d(r,{R:function(){return h},Vq:function(){return v},ZB:function(){return m},ZP:function(){return p},zV:function(){return g}});var n=t(4337),i=t(35250),o=t(7813),a=t(19841),s=t(21389);function l(){var e=(0,n._)(["p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer"]);return l=function(){return e},e}function u(){var e=(0,n._)(["flex px-3 min-h-[44px] py-1 items-center gap-3 dark:text-white cursor-pointer text-sm"]);return u=function(){return e},e}function d(){var e=(0,n._)(["border dark:border-white/20 min-h-0 hover:bg-gray-500/10 h-10 rounded-lg border-[rgba(0,0,0,0.1)]"]);return d=function(){return e},e}function c(){var e=(0,n._)(["h-px dark:bg-white/10 bg-black/20"]);return c=function(){return e},e}function f(){var e=(0,n._)(["",""]);return f=function(){return e},e}function p(e){var r=e.onClick,t=e.href,n=e.target,s=e.children,l=e.disabled;return(0,i.jsx)(o.v.Item,{disabled:l,children:function(e){var o=e.active;return(0,i.jsx)(m,{as:void 0!==t?"a":"button",onClick:r,href:t,target:n,className:(0,a.default)({"bg-gray-100 dark:bg-gray-800":o,"hover:bg-gray-100 dark:hover:bg-gray-800":!o&&!l}),children:s})}})}s.Z.a(l());var m=s.Z.a(u()),g=(0,s.Z)(m)(d()),h=s.Z.div(c()),v=(0,s.Z)(m)(f(),function(e){return e.$active?"bg-gray-100 dark:bg-gray-800":"dark:hover:bg-token-surface-primary hover:bg-token-surface-primary"})}}]);